# Flatpak
Flatpak — это система для создания, распространения и запуска изолированных настольных приложений в Linux.
## Установка из репозитория <Badge type="warning" text="sysphus" />
**Flatpak** можно установить любым привычным и удобным способом

**Установка через терминал**
::: code-group

```shell[apt-get]
su -
apt-get update
apt-get install flatpak
```
```shell[epm]
epm -i flatpak
```
:::

Для установки приложений при помощи **flatpak** из-под непривилегированного пользователя, следует добавить пользователя в группу **fuse**:

```shell
su -
gpasswd -a USER fuse
```
USER — имя не непривилегированного пользователя, укажите имя учетной записи. 

## Альтернативный вариант установки Flatpak

Альтернативный и более удобным способом является установка пакета `flatpak-repo-flathub`, при установке пакета: автоматические пакет выполнит все вышеизложенные операции:

::: code-group

```shell[apt-get]
su -
apt-get update
apt-get install flatpak-repo-flathub
```
```shell[epm]
epm -i flatpak-repo-flathub
```
:::

## Использование Flatpak

Основные команды, необходимые для установки, запуска приложений Flatpak и управления ими. Для получения полного списка команд **Flatpak** выполните `flatpak --help`

### Управление репозиториями

Для просмотра репозиториев настроенных в вашей системе, выполните:

```shell
flatpak remotes
```
Добавить репозиторий, выполните:

```shell
flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
```

В данном случае, `flathub` указано локальное имя, которое присваивается удаленному устройству. URL указывает на файл удаленного устройства `.flatpakrepo` . Опция `--if-not-exists` останавливает команду от выдачи ошибки, если удаленное устройство уже существует.

Удалить репозиторий, выполните:

```shell
flatpak remote-delete flathub
```

В данном случае, `flathub` — это локальное имя удаленного репозитория.

### Поиск приложений

Для поиска приложения/среды в Flatpak используйте команду `search`: 

```shell
flatpak search krita
```

### Установка приложений

Для установки приложения, запустите
```shell
flatpak install flathub org.gimp.GIMP
```

`flathub` — идентификатор удаленного репозитория, с которого должно быть установлено приложение, и `org.gimp.GIMP` - идентификатор приложения.

Как правило, приложению требуется определенная среда выполнения, и она будет установлена до приложения.

Сведения об устанавливаемом приложении также могут быть предоставлены в `.flatpakref` файле, который может быть удаленным или локальным. Чтобы указать `.flatpakref` вместо того, чтобы вручную указывать идентификатор удаленного устройства и приложения, запустите:

```shell
flatpak https://flathub.org/repo/appstream/org.gimp.GIMP.flatpakref
```
Начиная с Flatpak 1.2, команда `install` может выполнять предварительный поиск перед установкой приложения:
```shell
$ flatpak install gimp
```
подтвердите удаленный доступ и приложение и приступит к установке.

В графическом режиме для установки приложений в Flatpak **используйте** [Центр приложений (Gnome Sofrware)](/gnome-software). Во вкладке **«Установлено»** в списке выбирите приложение и нажмите кнопку **«Установить»**.

![flatpak_2](/flatpak/flatpak_2.gif)

### Запуск приложений
Для запуска приложения в Flatpak используйте команду `run` и идентификатор приложения:
```shell
flatpak run org.gimp.GIMP
```

### Удаление приложений

Для удаления приложения в Flatpak **используйте** команду `uninstall` и идентификатор приложения:

```shell
flatpak uninstall org.gimp.GIMP
```

В графическом режиме для удаления приложений в Flatpak **используйте** [Центр приложений (Gnome Sofrware)](/gnome-software). Во вкладке **«Установлено»** в списке выберите приложение и нажмите кнопку **«Удалить»**.

![flatpak_1](/flatpak/flatpak_1.gif)

### Устранение неполадок

В **Flatpak** существует набор команд для управление пакетным менеджером

Для удаления сред выполнения и расширений, которые не используются установленными приложениями, используйте:

```shell
flatpak uninstall --unused
```

Для исправления поврежденных пакетов Flatpak, используйте:

```shell
flatpak repair
```

Узнать, какие изменения вносились в вашу установку Flatpak с течением времени, вы можете просмотреть журналы:

```shell
flatpak history
```
